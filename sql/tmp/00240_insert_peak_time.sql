BEGIN;

DROP FUNCTION IF EXISTS C_PEAK_TIME;
DELIMITER //
CREATE FUNCTION C_PEAK_TIME() RETURNS INT DETERMINISTIC
BEGIN

  DECLARE currentTimestamp TIMESTAMP DEFAULT current_timestamp;
  DECLARE currentYear VARCHAR(4) DEFAULT YEAR(currentTimestamp);

  -- 登録する年数
  DECLARE addingYear INT DEFAULT 2;

  DECLARE i INT DEFAULT 0;

  WHILE i < addingYear DO

    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK1', STR_TO_DATE(CONCAT(currentYear, '/01/01'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/01/05'), '%Y/%m/%d'), 140);
    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK1', STR_TO_DATE(CONCAT(currentYear, '/03/20'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/03/31'), '%Y/%m/%d'), 140);
    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK1', STR_TO_DATE(CONCAT(currentYear, '/08/08'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/08/18'), '%Y/%m/%d'), 140);
    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK1', STR_TO_DATE(CONCAT(currentYear, '/12/26'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/12/31'), '%Y/%m/%d'), 140);
    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK2', STR_TO_DATE(CONCAT(currentYear, '/07/18'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/08/07'), '%Y/%m/%d'), 125);
    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK2', STR_TO_DATE(CONCAT(currentYear, '/08/19'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/08/31'), '%Y/%m/%d'), 125);
    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK2', STR_TO_DATE(CONCAT(currentYear, '/12/19'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/12/25'), '%Y/%m/%d'), 125);
    INSERT INTO PEAK_TIME (PEAK_TIME_CD, PEAK_START_DATE, PEAK_END_DATE, MULTIPLICATION_RATIO) VALUES('PEAK2', STR_TO_DATE(CONCAT(currentYear, '/03/13'), '%Y/%m/%d'), STR_TO_DATE(CONCAT(currentYear, '/03/19'), '%Y/%m/%d'), 125);

    SET currentTimestamp = DATE_ADD(currentTimestamp, INTERVAL 1 YEAR);
    SET currentYear = YEAR(currentTimestamp);
    SET i = i + 1;
  END WHILE;
  RETURN 0;
END//
DELIMITER ;

SELECT C_PEAK_TIME();

DROP FUNCTION C_PEAK_TIME;

COMMIT;
